en:
  graphql:
    mutations:
      createBlogPost:
        description: |
          *Creates new post in the given blog (widget).* User must be a member of the appropriate bubble.
          Request returns activity (feed element). Data from original post can be retrieved with the help of `o_post` field.
          Request may return errors:

          + `User is unauthorized`

          + `Access denied`

          + `Blog not found`

          + `Associated bubble not found`

          + `Record should have text and/or media file`

          + and other validation errors

          **Returned Value:** object type `Activity (ActivityType)`.

          **Request Example:**
          ```
            mutation createPost {
              createBlogPost(input: {blog_id: 3, text: "New post"}) {
                activity {
                  o_post {
                    text
                    created_at
                  }
                }
              }
            }
          ```

          **Response Example:**
          ```
            {
              "data": {
                "createBlogPost": {
                  "activity": {
                    "o_post": {
                      "text": "New post",
                      "created_at": "2016-08-30 07:26:45 UTC"
                    }
                  }
                }
              }
            }
          ```
        args:
          blog_id: |
            Blog ID, a new post to which will be added.

            **Required**

            **Type:** `Integer`
          title: |
            Post title.

            **Type:** `String`
          text: |
            Post text (contents).

            **Type:** `String`
          picture_files: |
            Base64-coded file or relative file path to file previously uploaded to server.

            **Type:** `Array`
          picture_filename: |
            Image filename.

            **Type:** `String`
          video_id: |
            Previously uploaded video identifier. Must use ID of the appropriate Medium object

            **Type:** `Integer`
          link_url: |
            Web URL of the external source. Example: `https://github.com/`

            **Type:** `String`
          link_title: |
            Title characterizing external source, URL of which was added to post

            **Type:** `String`
          link_description: |
            External source short description, URL of which was added to post

            **Type:** `String`
          link_picture_url: |
            Image URL that is a graphical icon for an external source

            **Type:** `String`

      destroyBlogPost:
        description: |
          *Delete post from blog widget by ID.*
           Request may return errors:

          + `User is unauthorized`

          + `Access denied`

          + `Post not found`

          **Returned Value:** `Boolean`.

          **Request Example:**
          ```
            mutation destroyPost {
              destroyBlogPost(input: {id: 103}) {
                status
              }
            }
          ```

          **Response Example:**
          ```
            {
              "data": {
                "destroyBlogPost": {
                  "status": true
                }
              }
            }
          ```
        args:
          id: |
            Blog widget post ID.

            **Required**

            **Type:** `Integer`

      updateBlogPost:
        description: |
          *Update title and text content of blog widget post entry*
          Request returns activity (feed element). Data from original post can be retrieved with the help of `o_post` field.
          Request may return errors:

          + `User is unauthorized`

          + `Access denied`

          + `Post not found`

          + `Record should have text and/or media file`

          + and other validation errors

          **Returned Value:** object type `Activity (ActivityType)`.

          **Request Example:**
          ```
            mutation updatePost {
              updateBlogPost(input: {id: 110, text: "Updated post"}) {
                activity {
                  o_post {
                    text
                    created_at
                    updated_at
                  }
                }
              }
            }
          ```

          **Response Example:**
          ```
            {
              "data": {
                "updateBlogPost": {
                  "activity": {
                    "o_post": {
                      "text": "Updated post",
                      "created_at": "2016-08-30 07:26:45 UTC",
                      "updated_at": "2016-08-30 12:59:32 UTC"
                    }
                  }
                }
              }
            }
          ```
        args:
          id: |
            Blog widget post ID.

            **Required**

            **Type:** `Integer`
          title: |
            Post title.

            **Type:** `String`
          text: |
            Post text (contents).

            **Type:** `String`
          link_url: |
            Web URL of the external source. Example: `https://github.com/`

            **Type:** `String`
          link_title: |
            Title characterizing external source, URL of which was added to post

            **Type:** `String`
          link_description: |
            External source short description, URL of which was added to post

            **Type:** `String`
          link_picture_url: |
            Image URL that is a graphical icon for an external source

            **Type:** `String`
      createMedium:
        description: |
          *Uploads new media file (img or vid) into user's private gallery or gallery-widget.* User must have access to the given album.
          In order to add a media file into gallery, user must be the manager or the owner of the appropriate bubble.
          *Video uploang is currently impossible due to Apollo restrictions.*
          Request may return errors:

          + `User is unauthorized`

          + `Access denied`

          + `Bubble not found`

          + `Associated gallery widget not found`

          + `Album not found`

          + `Picture is invalid`

          + `Attachment is absent`

          **Returned Value:** object type `Medium (MediumType)`.

          **Request Example:**
          ```
            mutation uploadMediaFileToGalleryWidget {
              createMedium(input: {bubble_id: 9, album_id: 4, title: "test", filename: "1.png",  picture_file: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAABvFBMVEX////J5/ZfueY2p983p984qOA1p99ZtuW/4/WByOsenNsypd8zpt8gndxsvujJ6PY3p+Ahnty33/NfueU0pt9NsOIxpd4rot4qod0sot4xpd8vpN4intxku+eb0++s2/KZ0u9euOYwpN43qOAto94uo94+quAso94ln91nvOf5/P1at+Ujn9wmoN0jntyHyuzE5fYrot3w+f2Fyeskn9yMze2Y0u694vRIruI1pt85qOB7xepxwegYmttXteRgueWc0+8fndzv+Pyz3vOf1fBku+bZ7vgood1Kr+J2w+kpod1Ir+KY0e9+xuonoN39/v6m2PBEreGIy+x0wukloN31+v2y3fODyOtYtuR6xOpzwukRl9nW7fhvwOl5w+rQ6vfi8/pVtORTtOT1+/0hndyOzu3e8fljuuYxpN4ln9zL6PbM6PeRz+3p9fv+/v59xuqPzu3b7/l/xuus2vL0+v1Jr+Izpd+13vNPsuNKsOOu2/L9/v9Aq+FeueaMzO2Y0u/2+/274fRovefx+fzZ7vlRs+ROsuOz3fOr2vFFruJ3w+nA4/Wt2/KX0e5ywekooN1HruKp2fFct+ZMseMmAgtoAAACEUlEQVRIx9XVaVfTQBQG4Cu5UypJkWC0pKkoMdi6pIjGJW5YWapBi4pW3FFx3zfccF8RFdQ/bChymmVuT+Lxg77fkpnnZObOnFwAWNAgIIsUTDQmwc3CJjGicI2UagZY1NQSFVQjt8JiMZZgyhKIuo+agbiCMYgt/lOCS9NtamauQMgjiUDxUMsua1++okPWcaVgdGKYJFblfAbzq6GaNWvXmYWu9d0hgoUNGy3P3UFzE8xn8xaArXqI2NsAtmdr39E7wJsdO3cpQZLpcQd2F+ffY2qPV/T2Qb8YIv2zQwN2Sag+SnvBn31OaGHS4NzQ/rwjucvrPOAXzeVwxTA/9Hv04KFiyTAP+8TwEd65qLVJRyvHRo77yAmNc/oonTwFZE7rHKKfOdswSpJzIoeI56FONIG3MLOOuDDGvcnqRZpUHC7BsUskuXyFS5hw9RpFUsgnTCmMXOeKGyojiHkTbnFJSaAIVefbOUaRFvMOT9yVkSQMrWEO0RVGE4ZG9737D/zioc7qkvG888gvHucYRSTDSJflJ0/94NmEwSgiPe978TL5KrCN1+UMIwlqb94G9/3uvSUwmrg/U/nDR8/8oU+DWX4T9WwfRac4+bm9MjX15eu3iWLbONGtAhVTtLQzXXJUTaGb7j/QX/4e+YMmnohrbGiUYooZSKbiEeu72wZkJTqwrR+zt6n1Z2Rjz7jf+AUu/GAb29DRTAAAAABJRU5ErkJggg=="
              }) {
                # some Medium fields
                medium {
                  thumb_url
                }
              }
            }
          ```

          **Response Example:**
          ```
            {
              "data": {
                "createMedium": {
                  "medium": {
                    "thumb_url": "/uploads/attachments/picture/file/121/thumb_1.png",
                  }
                }
              }
            }
          ```
        args:
          picture_file: |
            Base64-coded picture file.

            **Required**

            **Type:** `String`
          filename: |
            Picture filename.

            **Type:** `String`
          title: |
            Short description of this media file.

            **Type:** `String`
          bubble_id: |
            Bubble ID into gallery-widget of which this media file will be added.

            **Type:** `Integer`
          album_id: |
            Album ID into gallery-widget of which this media file will be added.

            **Type:** `Integer`
          video_file: |
            *Currently unavailable*
      createAlbum:
        description: |
          *Creates new album in user's private gallery or gallery-widget.*
          In order to create a gallery-widget album, user must be the manager or the owner of the appropriate bubble.
          Request may return errors:

          + `User is unauthorized`

          + `Access denied`

          + `Bubble not found`

          + `Associated gallery widget not found`

          **Returned Value:** object type `Album (AlbumType)`.

          **Request Example:**
          ```
            mutation createNewAlbum {
              createAlbum(input: {name: "New album"}) {
                album {
                  #some album fields
                  name
                }
              }
            }
          ```

          **Response Example:**
          ```
            {
              "data": {
                "createAlbum": {
                  "album": {
                    "name": "New album"
                  }
                }
              }
            }
          ```
        args:
          name: |
            Name of this album.

            **Required**

            **Type:** `String`
          privacy: |
            Access level for current album.

            **Required**

            **Possible Values:**

            + `private` - only bubble owner and moderators can upload photos to the current album.
              All the albums in user's private gallery are private.

            + `public` - any bubble member can upload files into the appropriate bubble.

            **Type:** `String`
          description: |
            Album description.

            **Type:** `String`
          bubble_id: |
            Bubble ID, into gallery-widget of which this album will be added.

            **Type:** `Integer`
      destroyAlbum:
        description: |
          *Destroys album in user's private gallery or gallery-widget.* **Album must be empty.**
          In order to destroy a gallery-widget album, user must be the manager or the owner of the appropriate bubble.
          Request may return errors:

          + `User is unauthorized`

          + `Access denied`

          + `Album not found`

          + `Cannot destroy non-empty album`

          **Returned Value:** status `Boolean`.

          **Request Example:**
          ```
            mutation rmAlbum {
              destroyAlbum(input: {id: 3}) {
                status
              }
            }
          ```

          **Response Example:**
          ```
            {
              "data": {
                "destroyAlbum": {
                  "status": true
                }
              }
            }
          ```
        args:
          id: |
            Album ID.

            **Required**

            **Type:** `Integer`
      updateAlbum:
        description: |
          *Updates name and description of album in user's private gallery or gallery-widget.*
          In order to destroy a gallery-widget album, user must be the manager or the owner of the appropriate bubble.
          You can pass all or only changed parameters into request.
          Request may return errors:

          + `User is unauthorized`

          + `Access denied`

          + `Bubble not found`

          **Returned Value:** object type `Album (AlbumType)`.

          **Request Example:**
          ```
            mutation editAlbum {
              updateAlbum(input:{id: 14, name: "Super Cars"}) {
                album {
                  # some Album fields
                  name
                }
              }
            }
          ```

          **Response Example:**
          ```
            {
              "data": {
                "updateAlbum": {
                  "album": {
                    "name": "Super Cars",
                  }
                }
              }
            }
          ```
        args:
          id: |
            Album ID.

            **Required**

            **Type:** `Integer`
          name: |
            Album name.

            **Type:** `String`
          description: |
            Album description.

            **Type:** `String`
      touchNotification:
        description: |
          *Flags the notification as read.*
          Request may return errors:

          + `User is unauthorized`

          + `Notification not found`

          **Returned Value:** `Boolean`.

          **Request Example:**
          ```
            mutation readNotif {
              touchNotification(input: {id: 306}) {
                status
              }
            }
          ```

          **Response Example:**
          ```
            {
              "data": {
                "touchNotification": {
                  "status": true
                }
              }
            }
          ```
        args:
          id: |
            Notification ID.

            **Required**

            **Type:** `Integer`
      sendBubbleInvitation:
        description: |
          *Sends invitation to join the given bubble.* You need to provide username or email of the invited user in the request.
          **It's allowed to pass just one of these arguments only.** You can invite both users already registered on the site and new users.
          Invited user will be forwarded an email. If the user is already registered on the site,
          then he will get a personal notification along with the email.
          Request may return errors:

          + `Request must contain one of the following params: 'email' or 'username'`

          + `User is unauthorized`

          + `Access denied`

          + `Bubble not found`

          + `User not found by username 'USERNAME'`

          + `User 'USERNAME' is already a member of this bubble`

          **Returned Value:** `Boolean`.

          **Request Example:**
          ```
            mutation inviteUser {
              sendBubbleInvitation(input:{bubble_id: 9, email: "user@example.com"}) {
                status
              }
            }
          ```

          **Response Example:**
          ```
            {
              "data": {
                "sendBubbleInvitation": {
                  "status": true
                }
              }
            }
          ```

          **RealTime:**

          + If the invited user is already registered on the site, he will receive a notification.
            **Channel:** `private-user-USER_ID`,
            **Event:** `notification_added`
        args:
          bubble_id: |
            Bubble ID, a member of which invited user will become.

            **Required**

            **Type:** `Integer`
          username: |
            User's username, who is already registered on the site, which will be forwarded an invitation.

            **Type:** `String`
          email: |
            Email, where an invitation will be forwarded.

            **Type:** `String`
      acceptBubbleInvitation:
        description: |
          *Using this mutation, user can accept bubble join invitation.* User will be added to bubble with guest status.
          You need to pass a token in request, which can be found in data of the appropriate notification or in the link of invitation email.
          Request may return errors:

          + `Invalid token`

          + `Access denied`

          + `Invitation already accepted`

          + `Invitation already declined`

          + `Invalid invitation`

          + `User is already a member of this bubble`

          + `Unknown invitation state`

          **Returned Values:**

          + `status (Boolean)` - operation status showing bubble join success

          + `confirmation_token (String)` - token-string if current user has incompleted profile

          **Request Example:**
          ```
            mutation acceptInv {
              acceptBubbleInvitation(input: {token: "Do3j9zZH3aTX9JzsETj2"}) {
                status
              }
            }
          ```

          **Response Example:**
          ```
            {
              "data": {
                "acceptBubbleInvitation": {
                  "status": true
                }
              }
            }
          ```

          **RealTime:**

          + User who sent the invitation will get a notification that the invitation was accepted.
            **Channel:** `private-user-USER_ID`,
            **Event:** `notification_added`

          + User owner will get a notification that there is a new member in the bubble.
            **Channel:** `private-user-USER_ID`,
            **Event:** `notification_added`

          + Users that are currently present on bubble page will get new member's info.
            **Channel:** `private-bubble-BUBBLE_PERMALINK`,
            **Event:** `member_joined`

          + Bubble feed will show a record about the new member join.
            **Channel:** `private-bubble-BUBBLE_PERMALINK`,
            **Event:** `feed_item_added`

          + User, who joined the bubble, will see a record of that event in his own feed.
            **Channel:** `private-user-USER_ID`,
            **Event:** `feed_item_added`

          + User's friends will see a record in their friends feed that this user (their friend) joined a bubble.
            **Channel:** `private-user-USER_ID`,
            **Event:** `feed_item_added`
        args:
          token: |
            Symbolic identifier, by which a search of the invitation is processed

            **Required**

            **Type:** `String`
      cancelBubbleInvitation:
        description: |
          *Using this mutation, user can decline bubble join invitation.*
          You need to pass a token in request, which can be found in data of the appropriate notification or in the link of invitation email.
          Request may return errors:

          + `User is unauthorized`

          + `Access denied`

          + `Invitation not found`

          **Returned Value:** `Boolean`.

          **Request Example:**
          ```
            mutation cancelInv {
              cancelBubbleInvitation(input: {token: "nvkV8ypNDEejxpCEm-ei"}) {
                status
                confirmation_token
              }
            }
          ```

          **Response Example:**
          ```
            {
              "data": {
                "cancelBubbleInvitation": {
                  "status": true
                  "confirmation_token": "YFSpUhKMxKVBH7Hmd3cs"
                }
              }
            }
          ```

          **RealTime:**

          + User, who sent the invitation, will get a notification that the invitation was declined.
            **Channel:** `private-user-USER_ID`,
            **Event:** `notification_added`
        args:
          token: |
            Symbolic identifier, by which a search of the invitation is processed

            **Required**

            **Type:** `String`
      changeBubbleAvatar:
        description: |
          *Replaces old bubble avatar with a new one.* You can pass params for img rotation/cropping into request.
          Request may return errors:

          + `User is unauthorized`

          + `Access denied`

          + `Bubble not found`

          + `Picture file is invalid`

          **Returned Value:** object type `Bubble (BubbleType)`.

          **Request Example:**
          ```
            mutation changeAva {
              changeBubbleAvatar(input: {bubble_id: 26, filename: "twitty.png", picture_file: "data:image/png;base64,i..."}) {
                bubble {
                  # some Bubble fields
                  avatar_url
                }
              }
            }
          ```

          **Response Example:**
          ```
            {
              "data": {
                "changeBubbleAvatar": {
                  "bubble": {
                    "avatar_url": "/uploads/avatar/picture/54/twitty.png"
                  }
                }
              }
            }
          ```

          **RealTime:**

          + Bubble feed will have a record that the avatar was changed.
            **Channel:** `private-bubble-BUBBLE_PERMALINK`,
            **Event:** `feed_item_added`

          + Users that are currently present on bubble page will get new avatar's data.
            **Channel:** `private-bubble-BUBBLE_PERMALINK`,
            **Event:** `bubble_avatar_changed`

          + User who changed bubble avatar will see a record of that event in his/her own feed.
            **Channel:** `private-user-USER_ID`,
            **Event:** `feed_item_added`

          + If the bubble is public, friends of the user who changed the avatar will see a record about that event in their friends feed.
            If the bubble is private, friends of the user who changed the avatar AND are valid members of this bubble, will see a record about avatar change.
            **Channel:** `private-user-USER_ID`,
            **Event:** `feed_item_added`
        args:
          bubble_id: |
            Bubble ID, avatar of which was changed.

            **Required**

            **Type:** `String`
          picture_file: |
            Base64-coded picture file.

            **Required**

            **Type:** `String`
          filename: |
            Picture filename.

            **Type:** `String`
          crop_x: |
            X-axis for picture cropping.

            **Type:** `Integer`
          crop_y: |
            Y-axis for picture cropping.

            **Type:** `Integer`
          crop_w: |
            Picture width after being cropped.

            **Type:** `Integer`
          crop_h: |
            Picture height after being cropped.

            **Type:** `Integer`
          rotation_angle: |
            Picture rotation angle.

            **Type:** `Integer`
      changeBubbleInterests:
        description: |
          *Changes the list of interests for this bubble.*
          Request may return errors:

          + `User is unauthorized`

          + `Access denied`

          + `Bubble not found`

          + `Something went wrong`

          **Returned Value:** object type `Bubble (BubbleType)`.

          **Request Example:**
          ```
          mutation changeBInterests {
            changeBubbleInterests(input: {bubble_id: 10, interests: ["custom", "cars"]}) {
              bubble {
                # some Bubble fields
                interests {
                  edges {
                    node {
                      name
                    }
                  }
                }
              }
            }
            }
          ```

          **Response Example:**
          ```
          {
            "data": {
              "changeBubbleInterests": {
                "bubble": {
                  "interests": {
                    "edges": [
                      {
                        "node": {
                          "name": "custom"
                        }
                      },
                      {
                        "node": {
                          "name": "cars"
                        }
                      }
                    ]
                  }
                }
              }
            }
          }
          ```

          **RealTime:**

          + Users that are currently present on bubble page will get a new interests list.
            **Channel:** `private-bubble-BUBBLE_PERMALINK`,
            **Event:** `bubble_interests_changed`
        args:
          bubble_id: |
            Bubble ID, the interests list of which will be changed.

            **Required**

            **Type:** `Integer`
          interests: |
            Interests list.

            **Required**

            **Type:** array of strings `[String]`
      changeUserInterests:
        description: |
          *Changes the list of interests for current user.*
          Request may return errors:

          + `User is unauthorized`

          + `Something went wrong`

          **Returned Value:** object type `User (UserType)`.

          **Request Example:**
          ```
          mutation changeUInterests {
            changeUserInterests(input: {interests: ["hockey", "cars"]}) {
              user {
                # some User fields
                interests {
                  edges {
                    node {
                      name
                    }
                  }
                }
              }
            }
          }
          ```

          **Response Example:**
          ```
          {
            "data": {
              "changeUserInterests": {
                "user": {
                  "interests": {
                    "edges": [
                      {
                        "node": {
                          "name": "hockey"
                        }
                      },
                      {
                        "node": {
                          "name": "cars"
                        }
                      }
                    ]
                  }
                }
              }
            }
          }
          ```

          **RealTime:**

          + Users reviewing this user's profile at the moment will get the new list of user's interests.
            **Channel:** `profile-page-USER_ID`,
            **Event:** `user_interests_changed`
        args:
          interests: |
            Interests list.

            **Required**

            **Type:** array of strings `[String]`
      createChatMessage:
        description: |
          *Sends a new message to bubble chat widget.* User must be a member of this bubble.
          Message cannot be empty.
          Request may return errors:

          + `User is unauthorized`

          + `Access denied`

          + `Chat widget not found`

          + `Bubble not found`

          + `Message cannot be empty`

          **Returned Value:** object type `Widgets::ChatWidget::Message (Widgets::ChatWidget::MessageType)`.

          **Request Example:**
          ```
          mutation newChatWidgetMessage {
            createChatMessage(input: {chat_id: 3, text: "Test message"}) {
              message {
                # some chat widget message field
                text
              }
            }
          }
          ```

          **Response Example:**
          ```
          {
            "data": {
              "createChatMessage": {
                "message": {
                  "text": "Test message"
                }
              }
            }
          }
          ```

          **RealTime:**

          + Users, which are currently on chat widget page, will receive a new message.
            **Channel:** `private-chatwidget-CHAT_WIDGET_ID`,
            **Event:** `message_created`
        args:
          chat_id: |
            Chat widget ID, into which a new message will be sent.

            **Required**

            **Type:** `Integer`
          text: |
            Message text (contents).

            **Type:** `String`
          picture_file: |
            Base64-coded file or relative file path to file previously uploaded to server.

            **Type:** `String`
          picture_filename: |
            Image filename.

            **Type:** `String`
          video_id: |
            Previously uploaded video identifier. Must use ID of the appropriate Medium object

            **Type:** `Integer`
          video_url: |
            Video URL from an external resource. Example: `https://www.youtube.com/watch?v=vxuhNmjnK9M`

            **Type:** `String`
          link_url: |
            Web URL of the external source. Example: `https://github.com/`

            **Type:** `String`
          link_title: |
            Title characterizing external source, URL of which was added to post

            **Type:** `String`
          link_description: |
            External source short description, URL of which was added to post

            **Type:** `String`
          link_picture_url: |
            Image URL that is a graphical icon for an external source

            **Type:** `String`
      removeAttachmentFromChatMessage:
        description: |
          *Removes media file from a message in chat widget,* if less then 24 hrs have passed since the moment of publishing.
          User must be the author if the message or the moderator of that bubble.
          If a message contained media file only, then it will be deleted.
          Request may return errors:

          + `User is unauthorized`

          + `Access denied`

          + `Message not found`

          **Returned Value:** object type `Widgets::ChatWidget::Message (Widgets::ChatWidget::MessageType)`.

          **Request Example:**
          ```
          mutation rmAttachmentFromMessage {
            removeAttachmentFromChatMessage(input: {id: 66}) {
              message {
                # some chat widget message fields
                text
                medium {
                  thumb_url
                }
              }
            }
          }
          ```

          **Response Example:**
          ```
          {
            "data": {
              "removeAttachmentFromChatMessage": {
                "message": {
                  "text": "chat img",
                  "medium": null
                }
              }
            }
          }
          ```

          **RealTime:**

          + Users that are currently on chat widget page will be notified of message change.
            **Channel:** `private-chatwidget-CHAT_WIDGET_ID`,
            **Event:** `message_updated`

          + If a message was deleted, online chat members will receive a notification of that.
            **Channel:** `private-chatwidget-CHAT_WIDGET_ID`,
            **Event:** `message_destroyed`
        args:
          id: |
            Message ID.

            **Required**

            **Type:** `Integer`
      joinMeToBubble:
        description: |
          *Allows user to join a public bubble by himself.* User is assigned a role of regular member - `guest`.
          Request may return errors:

          + `User is unauthorized`

          + `User can join this bubble only by invite`

          + `User is already a member of this bubble`

          + `Bubble not found`

          **Returned Value:** object type `Bubble (BubbleType)`.

          **Request Example:**
          ```
          mutation joinMe {
            joinMeToBubble(input: {bubble_id: 14}) {
              bubble {
                # some bubble fields
                name
              }
            }
          }
          ```

          **Response Example:**
          ```
          {
            "data": {
              "joinMeToBubble": {
                "bubble": {
                  "name": "Test-1"
                }
              }
            }
          }
          ```

          **RealTime:**

          + Bubble owner will get a personal notification of a new member.
            **Channel:** `private-user-USER_ID`,
            **Event:** `notification_added`.

          + Bubble members will receive brief info about the new memeber.
            **Channel:** `private-bubble-BUBBLE_PERMALINK`,
            **Event:** `member_joined`.

          + A new record about new member join will be added to bubble feed.
            **Channel:** `private-bubble-BUBBLE_PERMALINK`,
            **Event:** `feed_item_added`.

          + A record of his/her bubble join will be added to user's own feed.
            **Channel:** `private-dashboard-USER_ID`,
            **Event:** `feed_item_added`.

          + Firends of the new member (which are current members of that bubble) will see a record about his/her bubble join in their friends feed.
            **Channel:** `private-dashboard-USER_ID`,
            **Event:** `feed_item_added`.
        args:
          bubble_id: |
            Bubble ID.

            **Required**

            **Type:** `Integer`
      disjoinMeFromBubble:
        description: |
          *Allows user leave a bubble by himslef.* Bubble owner cannot leave bubble until he transfers his priviledges and permissions to another user.
          Request may return errors:

          + `User is unauthorized`

          + `User is not a member of this bubble`

          + `Owner cannot leave the bubble`

          + `Bubble not found`

          **Returned Value:** object type `Bubble (BubbleType)`.

          **Request Example:**
          ```
          mutation disjoinMe {
            disjoinMeFromBubble(input: {bubble_id: 1}) {
              bubble {
                # some bubble fields
                name
              }
            }
          }
          ```

          **Response Example:**
          ```
          {
            "data": {
              "disjoinMeFromBubble": {
                "bubble": {
                  "name": "privy"
                }
              }
            }
          }
          ```

          **RealTime:**

          +  Bubble owner will get a personal notification of user's leave.
            **Channel:** `private-user-USER_ID`,
            **Event:** `notification_added`.

          + Bubble members will get brief info about who left the bubble.
            **Channel:** `private-bubble-BUBBLE_PERMALINK`,
            **Event:** `member_left`.

          +  A record of the user leaving bubble will be added to bubble feed.
            **Channel:** `private-bubble-BUBBLE_PERMALINK`,
            **Event:** `feed_item_added`.

          + A record of his/her bubble leave will be added to user's own feed.
            **Channel:** `private-dashboard-USER_ID`,
            **Event:** `feed_item_added`.
        args:
          bubble_id: |
            Bubble ID.

            **Required**

            **Type:** `Integer`
      changeUserAvatar:
        description: |
          *Adds a new avatar for a current user and makes it default.* You can pass params for img rotation/cropping into request.
          Request may return errors:

          + `User is unauthorized`

          + `Picture file is invalid`

          **Returned Value:** object type `User (UserType)`.

          **Request Example:**
          ```
            mutation changeMyAvatar {
              changeUserAvatar(input: {filename: "twi.png", picture_file: "data:image/png;base64,i..."}) {
                user {
                  # some user fields
                  avatar_url
                }
              }
            }
          ```

          **Response Example:**
          ```
            {
              "data": {
                "changeUserAvatar": {
                  "user": {
                    "avatar_url": "/uploads/avatar/picture/68/twi.png"
                  }
                }
              }
            }
          ```

          **RealTime:**

          + Users being at the moment on the bubble page (of which this particular user is a member) will get the data about a new avatar of this user.
            **Channel:** `private-bubble-BUBBLE_PERMALINK`,
            **Event:** `member_avatar_changed`

          + User's friends will be notified about changing his/her avatar.
            **Channel:** `private-user-USER_ID`,
            **Event:** `friend_avatar_changed`

          + User will get a notification his avatar changed.
            **Channel:** `private-user-USER_ID`,
            **Event:** `avatar_changed`
        args:
          picture_file: |
            Base64-coded picture file.

            **Required**

            **Type:** `String`
          filename: |
            Picture filename.

            **Type:** `String`
          crop_x: |
            X-axis for picture cropping.

            **Type:** `Integer`
          crop_y: |
            Y-axis for picture cropping.

            **Type:** `Integer`
          crop_w: |
            Picture width after being cropped.

            **Type:** `Integer`
          crop_h: |
            Picture height after being cropped.

            **Type:** `Integer`
          rotation_angle: |
            Picture rotation angle.

            **Type:** `Integer`
      destroyMedium:
        description: |
          *Deletes media file.* User must be the owner/uploader of that file.
          To delete a media file from any bubble widget, user must be the manager or owner of that bubble.
          Request may return errors:

          + `User is unauthorized`

          + `Access denied`

          + `Media file not found`

          **Returned Value:** `Boolean (BooleanType)`.

          **Request Example:**
          ```
            mutation deleteMedia {
               destroyMedium(input: {id: 211}) {
                 status
               }
             }

          ```

          **Response Example:**
          ```
            {
              "data": {
                "destroyMedium": {
                  "status": true
                }
              }
            }
          ```

          **RealTime:**

          + If media file was in gallery widget
            **Channel:** `private-bubble-BUBBLE_PERMALINK`,
            **Event:** `media_destroyed`

          + If media file was in user's gallery and it was public
            **Channel:** `profile-page-USER_ID`,
            **Event:** `media_destroyed`

          + If media file was part of a post in blog widget
            **Channel:** `private-bubble-BUBBLE_PERMALINK`,
            **Event:** `post_updated`

          + If media file was part of a post on dashboard
            **Channel:** `private-dashboard-USER_ID`,
            **Event:** `note_updated`

          + If media file was part of a message in chat widget
            **Channel:** `private-chatwidget-CHAT_ID`,
            **Event:** `message_updated`

          + If media file was part of a message in wheelchat (1v1 chat)
            **Channel:** `private-messages_CHANNEL_NAME`,
            **Event:** `message_updated`

          + If media file was part of a comment
            **Channel:** `global`,
            **Event:** `comment_updated`
        args:
          id: |
            Medium object ID (media file wrapper).

            **Required**

            **Type:** `Integer`
      shareMedium:
        description: |
          *Allows user to add/share current media file into own feed.*
          Request may return errors:

          + `User is unauthorized`

          + validation errors

          **Returned Value:** `Boolean (BooleanType)`.

          **Request Example:**
          ```
          mutation shareMedia {
            shareMedium(input: {id: 207}) {
              status
            }
          }
          ```

          **Response Example:**
          ```
          {
            "data": {
              "shareMedium": {
                "status": true
              }
            }
          }
          ```

          **RealTime:**

          + In user's own feed a record appears that user shared that media file.
            **Channel:** `private-dashboard-USER_ID`,
            **Event:** `feed_item_added`
        args:
          id: |
            Medium object ID (media file wrapper).

            **Required**

            **Type:** `Integer`
      touchAllNotifications:
        description: |
          *Flags all unread notifications as read.*
          Request may return errors:

          + `User is unauthorized`

          **Returned Value:** `Boolean`.

          **Request Example:**
          ```
          mutation clearMissedNotifs {
            touchAllNotifications(input: {}) {
              status
            }
          }
          ```

          **Response Example:**
          ```
          {
            "data": {
              "touchAllNotifications": {
                "status": true
              }
            }
          }
          ```
      destroyBubble:
        description: |
          *Removes current bubble.* This operation can be executed only by the bubble owner.
          Request may return errors:

          + `User is unauthorized`

          + `Access denied`

          + `Bubble not found`

          **Returned Value:** `Boolean`.

          **Request Example:**
          ```
          mutation rmBubble {
            destroyBubble(input: {id: 20}) {
              status
            }
          }
          ```

          **Response Example:**
          ```
          {
            "data": {
              "destroyBubble": {
                "status": true
              }
            }
          }
          ```
        args:
          id: |
            Bubble ID.

            **Required**

            **Type:** `Integer`
      kickMemberFromBubble:
        description: |
          *Allows moderator to remove one of the current bubble members.* Bubble owner cannot leave bubble until he transfers his priviledges and permissions to another user.
          Request may return errors:

          + `User is unauthorized`

          + `User is not a moderator of this bubble`

          + `Owner cannot leave the bubble`

          + `Member not found`

          + `Bubble not found`

          **Returned Value:** `Boolean`.

          **Request Example:**
          ```
          mutation kickMember {
            kickMemberFromBubble(input: {bubble_id: 3, member_id: 5}) {
              status
            }
          }
          ```

          **Response Example:**
          ```
          {
            "data": {
              "kickMemberFromBubble": {
                "status": true
              }
            }
          }
          ```

          **RealTime:**

          +  Bubble owner will get a personal notification of user's leave.
            **Channel:** `private-user-USER_ID`,
            **Event:** `notification_added`.

          + Bubble members will get brief info about who left the bubble.
            **Channel:** `private-bubble-BUBBLE_PERMALINK`,
            **Event:** `member_left`.

          +  A record of the user leaving bubble will be added to bubble feed.
            **Channel:** `private-bubble-BUBBLE_PERMALINK`,
            **Event:** `feed_item_added`.

          + A record of his/her bubble leave will be added to user's own feed.
            **Channel:** `private-dashboard-USER_ID`,
            **Event:** `feed_item_added`.
        args:
          bubble_id: |
            Bubble ID.

            **Required**

            **Type:** `Integer`
          member_id: |
            User ID, which needs to be removed from bubble

            **Required**

            **Type:** `Integer`
      updateBubble:
        description: |
          *Updates data of the given bubble.* This operation can be executed only by the bubble moderators.
          Request may return errors:

          + `User is unauthorized`

          + `Bubble not found`

          + `User is not a moderator of this bubble`

          **Returned Value:** `Bubble (BubbleType)`

          **Request Example:**
          ```
          mutation updateMyBubble {
            updateBubble(input:{ id: 3, name: "empty", type: "private",
              avatar: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAABvFBMVEX////J5/ZfueY2p983p984qOA1p99ZtuW/4/WByOsenNsypd8zpt8gndxsvujJ6PY3p+Ahnty33/NfueU0pt9NsOIxpd4rot4qod0sot4xpd8vpN4intxku+eb0++s2/KZ0u9euOYwpN43qOAto94uo94+quAso94ln91nvOf5/P1at+Ujn9wmoN0jntyHyuzE5fYrot3w+f2Fyeskn9yMze2Y0u694vRIruI1pt85qOB7xepxwegYmttXteRgueWc0+8fndzv+Pyz3vOf1fBku+bZ7vgood1Kr+J2w+kpod1Ir+KY0e9+xuonoN39/v6m2PBEreGIy+x0wukloN31+v2y3fODyOtYtuR6xOpzwukRl9nW7fhvwOl5w+rQ6vfi8/pVtORTtOT1+/0hndyOzu3e8fljuuYxpN4ln9zL6PbM6PeRz+3p9fv+/v59xuqPzu3b7/l/xuus2vL0+v1Jr+Izpd+13vNPsuNKsOOu2/L9/v9Aq+FeueaMzO2Y0u/2+/274fRovefx+fzZ7vlRs+ROsuOz3fOr2vFFruJ3w+nA4/Wt2/KX0e5ywekooN1HruKp2fFct+ZMseMmAgtoAAACEUlEQVRIx9XVaVfTQBQG4Cu5UypJkWC0pKkoMdi6pIjGJW5YWapBi4pW3FFx3zfccF8RFdQ/bChymmVuT+Lxg77fkpnnZObOnFwAWNAgIIsUTDQmwc3CJjGicI2UagZY1NQSFVQjt8JiMZZgyhKIuo+agbiCMYgt/lOCS9NtamauQMgjiUDxUMsua1++okPWcaVgdGKYJFblfAbzq6GaNWvXmYWu9d0hgoUNGy3P3UFzE8xn8xaArXqI2NsAtmdr39E7wJsdO3cpQZLpcQd2F+ffY2qPV/T2Qb8YIv2zQwN2Sag+SnvBn31OaGHS4NzQ/rwjucvrPOAXzeVwxTA/9Hv04KFiyTAP+8TwEd65qLVJRyvHRo77yAmNc/oonTwFZE7rHKKfOdswSpJzIoeI56FONIG3MLOOuDDGvcnqRZpUHC7BsUskuXyFS5hw9RpFUsgnTCmMXOeKGyojiHkTbnFJSaAIVefbOUaRFvMOT9yVkSQMrWEO0RVGE4ZG9737D/zioc7qkvG888gvHucYRSTDSJflJ0/94NmEwSgiPe978TL5KrCN1+UMIwlqb94G9/3uvSUwmrg/U/nDR8/8oU+DWX4T9WwfRac4+bm9MjX15eu3iWLbONGtAhVTtLQzXXJUTaGb7j/QX/4e+YMmnohrbGiUYooZSKbiEeu72wZkJTqwrR+zt6n1Z2Rjz7jf+AUu/GAb29DRTAAAAABJRU5ErkJggg==",
              interests: ["test", "hockey"]
            }) {
              bubble {
                # some bubble fields
                id
              }
            }
          }
          ```

          **Response Example:**
          ```
          {
            "data": {
              "updateBubble": {
                "bubble": {
                  "id": "3"
                }
              }
            }
          }
          ```
        args:
          id: |
            Bubble ID.
            
            **Required**

            **Type:** `Integer`
          name: |
            Bubble name.

            **Type:** `String`
          zip_code: |
            Bubble zip code.

            **Type:** `String`
          description: |
            Bubble description.

            **Type:** `String`
          type: |
            Bubble type.

            **Possible Values:**

            + `private` - bubble will be private.

            + `public` - bubble will be public.
          avatar: |
            Base64-coded picture file.

            **Type:** `String`
          avatar_filename: |
            Picture filename.

            **Type:** `String`
          interests: |
            Interests list.

            **Type:** array of strings `[String]`
          cover_image: |
            Base64-coded picture file.

            **Type:** `String`
      destroySharedActivity:
        description: |
          *Destroys shared activity in user's feed.*
          Request may return errors:

          + `User is unauthorized`

          + `Access denied`

          + `Shared activity not found`

          **Returned Value:** status `Boolean`.

          **Request Example:**
          ```
            mutation destroySharedActivity {
              destroySharedActivity(input: {id: 19}) {
                status
              }
            }
          ```

          **Response Example:**
          ```
            {
              "data": {
                "destroySharedActivity": {
                  "status": true
                }
              }
            }
          ```
        args:
          id: |
            Activity ID.

            **Required**

            **Type:** `Integer`
      updateUser:
        description: |
          *Updates current user's profile information.*
          Request may return errors:

          + `User is unauthorized`

          + Some validation errors

          **Returned Value:** `User (UserType)`.

          **Request Example:**
          ```
          mutation updateMe {
            updateUser(input:{ username: "alex", first_name: "Alexander"
              avatar: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAMAAAAp4XiDAAABvFBMVEX////J5/ZfueY2p983p984qOA1p99ZtuW/4/WByOsenNsypd8zpt8gndxsvujJ6PY3p+Ahnty33/NfueU0pt9NsOIxpd4rot4qod0sot4xpd8vpN4intxku+eb0++s2/KZ0u9euOYwpN43qOAto94uo94+quAso94ln91nvOf5/P1at+Ujn9wmoN0jntyHyuzE5fYrot3w+f2Fyeskn9yMze2Y0u694vRIruI1pt85qOB7xepxwegYmttXteRgueWc0+8fndzv+Pyz3vOf1fBku+bZ7vgood1Kr+J2w+kpod1Ir+KY0e9+xuonoN39/v6m2PBEreGIy+x0wukloN31+v2y3fODyOtYtuR6xOpzwukRl9nW7fhvwOl5w+rQ6vfi8/pVtORTtOT1+/0hndyOzu3e8fljuuYxpN4ln9zL6PbM6PeRz+3p9fv+/v59xuqPzu3b7/l/xuus2vL0+v1Jr+Izpd+13vNPsuNKsOOu2/L9/v9Aq+FeueaMzO2Y0u/2+/274fRovefx+fzZ7vlRs+ROsuOz3fOr2vFFruJ3w+nA4/Wt2/KX0e5ywekooN1HruKp2fFct+ZMseMmAgtoAAACEUlEQVRIx9XVaVfTQBQG4Cu5UypJkWC0pKkoMdi6pIjGJW5YWapBi4pW3FFx3zfccF8RFdQ/bChymmVuT+Lxg77fkpnnZObOnFwAWNAgIIsUTDQmwc3CJjGicI2UagZY1NQSFVQjt8JiMZZgyhKIuo+agbiCMYgt/lOCS9NtamauQMgjiUDxUMsua1++okPWcaVgdGKYJFblfAbzq6GaNWvXmYWu9d0hgoUNGy3P3UFzE8xn8xaArXqI2NsAtmdr39E7wJsdO3cpQZLpcQd2F+ffY2qPV/T2Qb8YIv2zQwN2Sag+SnvBn31OaGHS4NzQ/rwjucvrPOAXzeVwxTA/9Hv04KFiyTAP+8TwEd65qLVJRyvHRo77yAmNc/oonTwFZE7rHKKfOdswSpJzIoeI56FONIG3MLOOuDDGvcnqRZpUHC7BsUskuXyFS5hw9RpFUsgnTCmMXOeKGyojiHkTbnFJSaAIVefbOUaRFvMOT9yVkSQMrWEO0RVGE4ZG9737D/zioc7qkvG888gvHucYRSTDSJflJ0/94NmEwSgiPe978TL5KrCN1+UMIwlqb94G9/3uvSUwmrg/U/nDR8/8oU+DWX4T9WwfRac4+bm9MjX15eu3iWLbONGtAhVTtLQzXXJUTaGb7j/QX/4e+YMmnohrbGiUYooZSKbiEeu72wZkJTqwrR+zt6n1Z2Rjz7jf+AUu/GAb29DRTAAAAABJRU5ErkJggg==",
              interests: ["test", "hockey"]
            }) {
              user {
                # some user fields
                id
              }
            }
          }
          ```

          **Response Example:**
          ```
          {
            "data": {
              "updateUser": {
                "user": {
                  "id": "3"
                }
              }
            }
          }
          ```
        args:
          username: |
            New username of this user.

            **Type:** `String`
          first_name: |
            First name of this user.

            **Type:** `String`.
          gender: |
            Gender of this user.

            **Type:** `String`.

            **Possible Values:**

            + `male`

            + `female`

            + `nil`
          zip_code: |
            Zip code of this user.

            **Type:** `String`
          phone: |
            Phone number of this user.

            **Type:** `String`.
          birthday: |
            Birthdate of this user. Format 'yyyy-mm-dd'.

            **Type:** `String`.
          language: |
            Preferred language of this user.

            **Type:** `String`.
          description: |
            *Short bio of this user.*

            **Type:** `String`.
          avatar: |
            Base64-coded picture file.

            **Type:** `String`
          avatar_filename: |
            Picture filename.

            **Type:** `String`
          interests: |
            Interests list.

            **Type:** array of strings `[String]`
          cover_image: |
            Base64-coded picture file.

            **Type:** `String`
      readWheelChatMessage:
        description: |
          *Mark wheelchat message as read by receiver.*
          Request may return errors:

          + `User is unauthorized`

          + `Access denied`

          + `Message not found`

          **Returned Value:** `WheelChat::Message (WheelChat::MessageType)`.

          **Request Example:**
          ```
            mutation readMsg {
              readWheelChatMessage(input: {id: 327}) {
                message {
                  text
                  read_at
                }
              }
            }
          ```

          **Response Example:**
          ```
            {
              "data": {
                "readWheelChatMessage": {
                  "message": {
                    "text": "some text",
                    "read_at": "2017-03-06 11:56:26 UTC"
                  }
                }
              }
            }
          ```
        args:
          id: |
            Wheelchat message ID

            **Required**

            **Type:** `Integer`

